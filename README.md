# Local
Сервис предоставляет простое API для поиска адресов. При первом запуске
приложение автоматически скачивает архив, наполняет PostgreSQL и пишет прогресс
в консоль.

## Требования

- Node.js 18+
- PostgreSQL 14+

## Установка зависимостей

```bash
npm install
```

## Настройка базы данных (docker-compose)

1. Запустите PostgreSQL через docker-compose:

   ```bash
   docker-compose up -d
   ```

2. Убедитесь, что приложение видит базу через переменные окружения
   (`POSTGRES_*` или `DATABASE_URL`). При первом старте сервис сам создаст
   таблицу, индексы и наполнит её данными.

## Загрузка адресов

По умолчанию используется текущий месяц. Чтобы загрузить конкретный месяц,
передайте переменную окружения:

```bash
export ADDRESS_DATA_MONTH=202512
```

## Запуск приложения

```bash
npm run start:dev
```

При первом запуске вы увидите прогресс загрузки и вставки в консоли
(`сколько/сколько` и проценты).

## API

### POST `/addresses/search`

Поиск адресов по строке пользователя.

```json
{
  "query": "Seoul",
  "limit": 20,
  "offset": 0,
  "lang": "any"
}
```

- `query` — строка поиска (обязательно).
- `limit` — максимум элементов (по умолчанию 20, максимум 50).
- `offset` — смещение (по умолчанию 0).
- `lang` — `ko`, `en` или `any` (по умолчанию `any`).

Ответ:

```json
[
  {
    "id": "1234567890",
    "display": {
      "ko": "서울특별시 ...",
      "en": "Seoul ..."
    },
    "search": {
      "ko": "서울특별시 ...",
      "en": "seoul ..."
    },
    "payload": {}
  }
]
```
