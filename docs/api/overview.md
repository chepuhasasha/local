<- [Содержание](../../README.md)

---

# API: обзор

Документ описывает общие сведения об HTTP API: базовые правила, Swagger и формат ошибок.

## Базовая информация

- API запускается NestJS приложением на порту `PORT` (по умолчанию 3000).
- Базовый URL локально: `http://localhost:3000`.
- Swagger UI доступен по адресу `/docs`.
- Все запросы и ответы используют JSON.

## Идентификатор запроса

- Заголовок `x-request-id` принимается от клиента или генерируется автоматически.
- `x-request-id` возвращается в каждом ответе.
- Этот идентификатор попадает в логи.

## Валидация

- Все входные DTO валидируются глобальным `ValidationPipe`.
- Лишние поля запрещены (`forbidNonWhitelisted: true`).
- Ошибки валидации возвращают `400 BadRequest`.

## Формат ошибок

`HttpExceptionFilter` возвращает ошибки в виде JSON:

```json
{
  "statusCode": 400,
  "error": "BadRequestException",
  "message": "...",
  "path": "/addresses/search",
  "requestId": "...",
  "timestamp": "..."
}
```

Поле `message` может быть строкой или массивом сообщений валидации.

## Аутентификация

Эндпоинты `/auth/*` реализованы (email + OTP, refresh, logout, `/auth/me`), остальные эндпоинты пока публичны. Подробнее — в [Безопасность: аутентификация](../security/authentication.md).
