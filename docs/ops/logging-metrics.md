<- [Содержание](../README.md)

---

# Наблюдаемость: логирование и метрики
Owner: Ops Team
Last reviewed: 2026-02-04

## Цель
Описать текущие механизмы логирования и мониторинга.

## Контекст
Логирование реализовано через `AppLoggerService`. Метрик и трассировки пока нет.

## Шаги
1. Настройте уровень логирования через `LOG_LEVEL`.
2. Используйте `x-request-id` для трассировки запросов.

## Логирование
Используется `AppLoggerService` (обёртка над `ConsoleLogger`).

### Уровни логов
`LOG_LEVEL` управляет набором уровней:

| `LOG_LEVEL` | Включённые уровни |
| --- | --- |
| `error` | `error` |
| `warn` | `error`, `warn` |
| `log` | `error`, `warn`, `log` |
| `debug` | `error`, `warn`, `log`, `debug` |
| `verbose` | `error`, `warn`, `log`, `debug`, `verbose` |

### Request ID
- Если запрос содержит заголовок `x-request-id`, он будет использован.
- Если заголовка нет, идентификатор будет сгенерирован автоматически.
- Для логов внутри HTTP-запроса всегда добавляется префикс:

```
[request_id=123e4567-e89b-12d3-a456-426614174000] message
```

## Метрики и трассировка
- Метрики и tracing не реализованы.
- Единственные системные проверки — health endpoints.

## Health endpoints
- `/health` — liveness.
- `/health/info` — диагностическая информация.
- `/health/ready` — readiness.

Контракты см. в [API: эндпоинты](../reference/api/endpoints.md).

## Ограничения
Логи не агрегируются и не отправляются во внешние системы — это зона ответственности инфраструктуры.

## См. также
- [Переменные окружения](../reference/configuration/environment-variables.md)
- [Траблшутинг](troubleshooting.md)
