<- [Содержание](../README.md)

---

# Деплой: обзор
Owner: Ops Team
Last reviewed: 2026-02-04

## Цель
Описать текущие возможности деплоя и рекомендуемый порядок запуска.

## Контекст
В репозитории нет Dockerfile и Kubernetes манифестов. Деплой предполагается на VM/сервере.

## Шаги
1. Установите зависимости и подготовьте `.env`.
2. Соберите приложение и запустите миграции.
3. Импортируйте адреса.
4. Запустите API.

## Что есть в репозитории
- `docker-compose.yml` только для PostgreSQL в локальной разработке.
- Нет Dockerfile для приложения.
- Нет Kubernetes манифестов.

## Рекомендуемый базовый сценарий (VM/сервер)
1. Установить зависимости:

```bash
npm ci
```

2. Подготовить `.env` (минимум: `POSTGRES_*`, `PORT`, `LOG_LEVEL`).

3. Собрать приложение:

```bash
npm run build
```

4. Запустить миграции:

```bash
npm run migration:run
```

5. Выполнить импорт адресов:

```bash
npm run import:addresses
```

6. Запустить API:

```bash
npm run start:prod
```

## Health checks
- Liveness: `GET /health`
- Readiness: `GET /health/ready`

## Планирование импорта
Импорт адресов — отдельный процесс. Обычно его запускают:
- вручную перед релизом,
- или по расписанию (cron/Kubernetes CronJob).

## Ограничения
Документ не описывает контейнеризацию. Для Docker сценариев используйте отдельный гайд.

## См. также
- [Деплой: Docker](docker.md)
- [Импорт адресов](../how-to/addresses-import.md)
