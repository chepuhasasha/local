<- [Содержание](../../README.md)

---

# Безопасность: hardening

Документ фиксирует текущие меры защиты и то, что ещё не реализовано.

## Текущее состояние

- **Валидация входных данных**: глобальный `ValidationPipe` с `whitelist`, `transform`, `forbidNonWhitelisted`.
- **Единый формат ошибок**: `HttpExceptionFilter` формирует JSON и логирует ошибки.
- **Request ID**: `RequestIdInterceptor` добавляет `x-request-id` и сохраняет его в контексте.
- **Валидация конфигурации**: все env-переменные проходят проверку Zod.

Подробнее о цепочке обработки запроса см. в [Архитектура: жизненный цикл запроса](../architecture/request-lifecycle.md).

## Что отсутствует

- Полное покрытие аутентификацией и авторизацией для всех эндпоинтов.
- Rate limiting / throttling.
- Защитные HTTP заголовки (например, `helmet`).
- Явная настройка CORS.
- Ограничения на размер тела запроса.
- Политика работы с секретами (vault, KMS и т.п.).

## Рекомендации

1) Добавить аутентификацию и минимум базовых ролей.
2) Включить rate limiting для публичных эндпоинтов.
3) Настроить CORS и защитные заголовки.
4) Ввести лимиты на размер запросов для защиты от злоупотреблений.
5) Зафиксировать политику хранения и ротации секретов.
