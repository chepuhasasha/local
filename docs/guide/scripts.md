<- [Содержание](../README.md)

---

# Скрипты проекта
Owner: Backend Team
Last reviewed: 2026-02-04

## Цель
Дать полный список npm-скриптов и их назначение.

## Контекст
Список основан на `package.json` и отражает актуальные команды разработки и эксплуатации.

## Шаги
1. Найдите нужную задачу в списке.
2. Используйте соответствующий скрипт.

## Разработка

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run start` | Запуск NestJS приложения. | Базовый запуск без watch. |
| `npm run start:dev` | Запуск в режиме watch. | Локальная разработка. |
| `npm run start:debug` | Запуск в режиме debug + watch. | Отладка через Node Inspector. |

## Сборка и продакшн

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run build` | Сборка TypeScript в `dist`. | Перед запуском в production. |
| `npm run start:prod` | Запуск собранного приложения из `dist`. | Production или окружения без ts-node. |

## Импорт адресов

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run import:addresses:dev` | Импорт адресов через `ts-node`. | Локальная разработка. |
| `npm run import:addresses` | Импорт адресов из `dist/`. | После `npm run build`. |

Подробности — в [Импорт адресов](../how-to/addresses-import.md).

## Миграции

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run migration:run` | Запуск миграций TypeORM. | Инициализация доменных таблиц. |
| `npm run migration:revert` | Откат последней миграции. | При необходимости отката. |

## Очистка БД

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run db:clean:dev` | Очистка доменных таблиц (`users`, `auth_*`) без трогания адресов. | Локальная разработка через `ts-node`. |
| `npm run db:clean` | Очистка доменных таблиц (`users`, `auth_*`) без трогания адресов (из `dist/`). | После `npm run build`. |

## Качество кода

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm run format` | Форматирование `src/**/*.ts` и `test/**/*.ts`. | Перед коммитом или при массовых правках. |
| `npm run lint` | Линтинг `src` и `test`. | Перед PR и релизом. |

## Тесты

| Скрипт | Назначение | Когда использовать |
| --- | --- | --- |
| `npm test` | Unit-тесты (`test/jest-unit.json`). | Регулярно в разработке. |
| `npm run test:e2e` | E2E-тесты (`test/jest-e2e.json`). | При изменениях API или интеграций. |
| `npm run test:watch` | Jest watch режим. | Локальная разработка. |
| `npm run test:cov` | Покрытие тестами. | Перед релизом или CI. |
| `npm run test:debug` | Запуск Jest с Node Inspector. | Отладка тестов. |

## Ограничения
Команды зависят от актуального `package.json`. При изменениях скриптов обновляйте этот документ.

## См. также
- [Тестирование](testing.md)
- [Правила разработки](development-rules.md)
